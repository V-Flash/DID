{% extends "base.html" %}

{% block content %}
  <h2>Edit Post</h2>
  <form method="post">
    {% csrf_token %}
    <!-- Your form fields here -->
    <label for="published_date">Published Date:</label>
    <input type="datetime-local" id="published_date" name="published_date" value="{{ post.published_date|date:'Y-m-d\TH:i' }}" required>
    
    <button type="submit">Save</button>
  </form>

  <!-- JavaScript for displaying alert message -->
  <script>
    // Get the current date and time
    var currentDate = new Date();

    // Get the input element for published date
    var publishedDateInput = document.getElementById('published_date');

    // Add an event listener to the form submission
    document.querySelector('form').addEventListener('submit', function (event) {
      var selectedDate = new Date(publishedDateInput.value);
      
      // Check if the selected date is in the past
      if (selectedDate <= currentDate) {
        event.preventDefault(); // Prevent the form submission
        alert('Publish date must be in the future');
      }
    });
  </script>

  <!-- Display error message if it exists -->
  {% if error_message %}
    <p>{{ error_message }}</p>
  {% endif %}
{% endblock %}
