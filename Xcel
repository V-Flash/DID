<script type="text/javascript">
  // Variables to keep track of menu state
  var menuSearchContainer = $(".menu-search-container");
  var navIcon = $(".nav-icon");

  $(".search-open").click(function(e) {
    // Prevent click event propagation to document
    e.stopPropagation();

    if (menuSearchContainer.is(":hidden")) {
      // Slide down with fade effect
      menuSearchContainer.slideDown();
      navIcon.fadeTo("fast", 0, function() {
        // Set visibility to hidden after fading out
        navIcon.css("visibility", "hidden").fadeTo("fast", 1);
      });
    } else {
      // Slide up with fade effect
      menuSearchContainer.slideUp(function() {
        // Set visibility to visible before fading in
        navIcon.css("visibility", "visible").fadeTo("fast", 1);
      });
    }
  });

  // Handle clicks outside the menuSearchContainer
  $(document).click(function() {
    if (!menuSearchContainer.is(":hidden")) {
      // Slide up the menuSearchContainer if it's not hidden
      menuSearchContainer.slideUp(function() {
        // Set visibility to visible before fading in
        navIcon.css("visibility", "visible").fadeTo("fast", 1);
      });
    }
  });

  // Prevent clicks inside the menuSearchContainer from closing it
  menuSearchContainer.click(function(e) {
    e.stopPropagation();
  });
</script>

<ul class="navbar-nav ml-auto nav-3 justify-content-center">
  <button type="button" class="btn btn-link search-open nav-btn-link position-relative">
    <div>
      <i class="bi bi-search nav-icon"></i>
    </div>
    <div class="ml-20"></div>
  </button>
  <i class="bi nav-icon" style="visibility: hidden;"></i>
</ul>
<div class="menu-search-container" style="display: none;">
  <!-- Your menu content goes here -->
</div>
