<?php
// Initialize an empty array to store product weights
$product_weights = array();

// Query all products (adjust the arguments as needed)
$args = array(
    'post_type' => 'product',
    'posts_per_page' => -1, // Retrieve all products
);

$products = new WP_Query($args);

while ($products->have_posts()) {
    $products->the_post();
    $product = wc_get_product(get_the_ID());
    $product_weight = $product->get_weight();

    // Store product weight in the array
    $product_weights[] = $product_weight;
}

// Reset post data
wp_reset_postdata();

// Count products by weight
$product_counts = array_count_values($product_weights);
?>

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Product Weight Counts</title>
</head>
<body>
    <h1>Product Weight Counts</h1>
    <table border="1">
        <thead>
            <tr>
                <th>Weight</th>
                <th>Count</th>
            </tr>
        </thead>
        <tbody>
            <?php foreach ($product_counts as $weight => $count): ?>
                <tr>
                    <td><?php echo $weight; ?> <?php echo get_option('woocommerce_weight_unit'); ?></td>
                    <td><?php echo $count; ?></td>
                </tr>
            <?php endforeach; ?>
        </tbody>
    </table>
</body>
</html>
