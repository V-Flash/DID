function custom_woocommerce_product_orderby( $query ) {
    if ( is_shop() || is_product_category() || is_product() ) {
        $query->set( 'orderby', 'meta_value_num' ); // Order by numeric value (price)
        $query->set( 'meta_key', '_price' ); // Use the "_price" meta key
        $query->set( 'order', 'DESC' ); // Sort in descending order (high to low)
    }
}
add_action( 'pre_get_posts', 'custom_woocommerce_product_orderby' );


<?php
// Call the custom sorting function to modify the product query
custom_woocommerce_product_orderby();

if ( have_posts() ) :
    while ( have_posts() ) : the_post();
        // Your product content goes here
    endwhile;
endif;
?>
