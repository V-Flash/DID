$(document).ready(function() {
  // Rest of your existing code...

  // When the user selects options, save them to sessionStorage
  $('.filter, .weight-filter').change(function() {
    saveFilterSelections();
    filterProducts();
  });

  // Load filter selections from sessionStorage when the page loads
  loadFilterSelections();

  function saveFilterSelections() {
    // Gather the selected filter options
    var selectedFilters = {
      minPrice: minPrice,
      maxPrice: maxPrice,
      checkedCategories: $('.filter:checked').map(function() {
        return $(this).data('category').toString();
      }).get(),
      selectedWeights: $('.weight-filter:checked').map(function() {
        return parseInt($(this).data('weight'));
      }).get()
    };

    // Store the selections in sessionStorage
    sessionStorage.setItem('filterSelections', JSON.stringify(selectedFilters));
  }

  function loadFilterSelections() {
    // Retrieve filter selections from sessionStorage
    var savedFilters = sessionStorage.getItem('filterSelections');

    if (savedFilters) {
      savedFilters = JSON.parse(savedFilters);

      // Set the filter options based on the saved selections
      minPrice = savedFilters.minPrice;
      maxPrice = savedFilters.maxPrice;
      $(".slider-range").slider('values', [minPrice, maxPrice]);

      // Update checkboxes for categories and weights
      $('.filter, .weight-filter').prop('checked', false);
      savedFilters.checkedCategories.forEach(function(category) {
        $('.filter[data-category="' + category + '"]').prop('checked', true);
      });
      savedFilters.selectedWeights.forEach(function(weight) {
        $('.weight-filter[data-weight="' + weight + '"]').prop('checked', true);
      });

      // Update the UI and apply filters
      $(".amount").val("₹" + minPrice + " - ₹" + maxPrice);
      filterProducts();
    }
  }
});
